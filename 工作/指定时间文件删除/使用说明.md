# 智能文件夹清理器 - 使用说明

## 简介

这是一个基于Python和tkinter的图形界面程序，可以帮助您根据文件的修改时间自动清理文件夹中的旧文件。

## 功能特性

- ✅ 图形化用户界面，操作简单直观
- ✅ 根据文件最后修改时间删除旧文件
- ✅ 支持递归处理子文件夹
- ✅ 支持移动到回收站（可恢复）或永久删除
- ✅ 文件类型过滤功能
- ✅ 预览功能，查看将要删除的文件列表
- ✅ 详细的操作日志
- ✅ 完善的错误处理机制

## 安装依赖

### 方法1：使用pip安装（推荐）

```bash
pip install -r requirements.txt
```

### 方法2：手动安装

```bash
pip install send2trash
```

**注意：** `send2trash`库是可选的。如果不安装，程序仍可运行，但只能使用永久删除功能，无法使用回收站功能。

## 运行程序

### Windows系统

双击运行 `file_cleaner.py` 或在命令行中运行：

```bash
python file_cleaner.py
```

### Linux/Mac系统

```bash
python3 file_cleaner.py
```

或者给脚本添加执行权限后直接运行：

```bash
chmod +x file_cleaner.py
./file_cleaner.py
```

## 使用步骤

### 1. 选择目标文件夹

点击"浏览..."按钮，选择您想要清理的文件夹。

### 2. 设置时间条件

在数字输入框中输入天数，例如输入"30"表示删除30天前修改过的文件。

### 3. 配置选项

- **包含子文件夹**：如果勾选，程序会递归处理所有子文件夹中的文件
- **移动到回收站**：如果勾选，文件会被移动到系统回收站（可恢复）；取消勾选将永久删除文件（不可恢复）
- **文件类型过滤**：可以指定要删除的文件类型，例如：
  - `*.log` - 只删除.log文件
  - `*.tmp, *.bak` - 删除.tmp和.bak文件
  - `*.*` 或留空 - 删除所有类型的文件

### 4. 预览文件

点击"预览"按钮可以查看所有符合条件的文件列表，包括：
- 文件的修改时间
- 文件大小
- 完整路径
- 总计文件数量和总大小

**重要：预览操作不会删除任何文件，可以安全使用。**

### 5. 执行清理

点击"执行清理"按钮后：
1. 程序会弹出确认对话框，显示将要删除的文件数量
2. 确认后开始执行删除操作
3. 实时显示删除进度和结果
4. 完成后显示统计信息

## 安全提示

⚠️ **重要警告**

1. **谨慎使用永久删除**：如果取消勾选"移动到回收站"，文件将被永久删除，无法恢复！
2. **先使用预览功能**：建议在执行清理前，先使用"预览"功能查看将要删除的文件列表
3. **备份重要数据**：在删除任何文件之前，请确保已备份重要数据
4. **测试环境**：建议先在测试文件夹中使用程序，熟悉操作后再处理重要文件

## 错误处理

程序会自动处理以下常见错误：

- **权限不足**：如果无法访问某些文件或文件夹，会在日志中显示警告，跳过这些文件继续处理
- **文件被占用**：如果文件正在被其他程序使用，会显示错误信息并跳过
- **路径不存在**：如果选择的文件夹不存在，会提示错误

所有错误都会在日志区域详细记录，程序不会因单个文件错误而崩溃。

## 系统要求

- **Python版本**：Python 3.6 或更高版本
- **操作系统**：Windows、Linux、macOS
- **必需库**：tkinter（Python自带）
- **可选库**：send2trash（用于回收站功能）

## 常见问题

### Q1: 为什么无法使用"移动到回收站"功能？

A: 这个功能需要安装`send2trash`库。运行 `pip install send2trash` 安装即可。

### Q2: 删除的文件能恢复吗？

A: 如果选择了"移动到回收站"，可以从系统回收站恢复。如果是永久删除，则无法恢复。

### Q3: 程序会删除文件夹吗？

A: 不会。程序只删除文件，不会删除文件夹（即使文件夹是空的）。

### Q4: 如何删除特定类型的文件？

A: 在"文件类型过滤"中输入文件类型，例如：
- `*.log` - 只删除日志文件
- `*.tmp, *.cache` - 删除临时文件和缓存文件

### Q5: 为什么某些文件没有被删除？

A: 可能的原因：
1. 文件修改时间晚于设置的时间阈值
2. 文件类型不匹配过滤条件
3. 没有足够权限访问该文件
4. 文件正在被其他程序使用

## 技术说明

- 程序使用文件的**最后修改时间**（`os.path.getmtime`）作为判断依据
- 使用OOP（面向对象）方式编写，代码结构清晰
- 完整的异常处理，确保程序稳定运行
- 实时更新日志和状态，提供良好的用户反馈

## 许可证

本程序为自由软件，可以自由使用和修改。

## 免责声明

使用本程序删除文件的风险由用户自行承担。开发者不对因使用本程序导致的任何数据丢失负责。请在使用前仔细阅读说明并做好数据备份。
